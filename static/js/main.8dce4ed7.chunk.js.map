{"version":3,"sources":["Recipe/index.js","Calculator.js","SharedRecipe.js","share/index.js","App.js","reportWebVitals.js","index.js"],"names":["removeComponent","currentState","action","removingComponent","recipe","components","find","recipeComponent","name","component","_","cloneDeep","error","message","filteredRecipeComponents","filter","updatedState","availableComponents","push","grams","unlockedComponents","locked","length","gramsPerComponent","Decimal","div","forEach","add","toString","setEvenGrams","updateRecipeGrams","proportions","state","recipeGrams","template","fixedComponents","fixedComponent","decimalProportion","proportionValues","Object","values","validProportions","proportion","isNaN","totalComponentsProportion","minus","reduce","a","b","toNumber","propsToUpdate","v","proportionPerItem","keys","componentName","propValue","getProportions","map","times","reducer","type","swappedComponents","previous","availableComponent","current","swapComponent","newGrams","otherComponent","deltaGrams","componentsToUpdate","numberOfComponentsToUpdate","gramsPerComponentsToUpdate","componentToUpdate","sumOfGrams","anyNegative","some","startsWith","equals","updateComponentGrams","toggleLock","includes","addComponent","fixedComponentsDecimalProportion","fixedComponentsRecipe","firstOtherComponent","otherComponents","createNewRecipe","SelectComponent","selectedComponent","props","value","Calculator","onChangeRecipeGrams","onSwapComponent","onToggleComponent","onUpdateComponentGrams","style","textAlign","pattern","onChange","index","color","backgroundColor","disabled","ev","target","onClick","width","verticalAlign","sharedRecipe","className","stateToShareableURL","compressedState","hash","compressState","btoa","JSON","stringify","window","location","origin","process","Divider","display","marginHorizontal","App","React","useReducer","dispatch","encodedCompressedState","decodedState","parse","atob","componentArray","decompressState","substr","SharedRecipe","marginTop","cursor","marginRight","close","text","href","onCopy","alert","marginLeft","FacebookShareButton","quote","hashtag","url","LinkedinShareButton","title","summary","source","RedditShareButton","recipeTemplates","isDecimal","candidate","e","Error","test","recipeTemplate","defaultValue","isNeg","setTimeout","select","open","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8dce4ed7.chunk.js","sourcesContent":["import Decimal from 'decimal.js';\nimport _ from \"lodash\";\n\n\n//const round = num => parseFloat(num.toPrecision(3));\nconst round = num => Decimal(num.toPrecision(3)).toNumber();\n\nconst createNewRecipe = (currentState, action) => {\n    const { template } = action;\n    const fixedComponentsDecimalProportion = template.fixedComponents.reduce((a, b) => a.add(Decimal(b.decimalProportion)), Decimal(0));\n    const fixedComponentsRecipe = template.fixedComponents.map(component => ({\n        name: component.name,\n        grams: component.decimalProportion.toString(),\n        locked: true,\n    }));\n    const firstOtherComponent = {\n        ...template.otherComponents[0],\n        grams: Decimal(1).minus(fixedComponentsDecimalProportion).toString(),\n        locked: false,\n    };\n    const availableComponents = template.otherComponents\n        .filter(component => component.name !== firstOtherComponent.name);\n    return {\n        recipe: {\n            name: template.name,\n            grams: \"1\",\n            components: [\n                ...fixedComponentsRecipe,\n                firstOtherComponent\n            ]\n        },\n        availableComponents,\n        template,\n    }\n};\n\nconst toggleLock = (currentState, action) => {\n    const updatedState = _.cloneDeep(currentState);\n    updatedState.recipe.components = updatedState.recipe.components.map(recipeComponent => recipeComponent.name !== action.component.name ? recipeComponent : { ...recipeComponent, locked: !recipeComponent.locked });\n    return updatedState;\n};\n\nconst addComponent = (currentState, action) => {\n    const { component } = action;\n    const updatedState = _.cloneDeep(currentState);\n    if (updatedState.availableComponents.length === 0) {\n        return {\n            ...updatedState,\n            error: {\n                message: \"No es posible agregar más componentes a esta receta\"\n            }\n        };\n    }\n    const supportedComponentsNames = updatedState.availableComponents.map(otherComponent => otherComponent.name);\n    if (!supportedComponentsNames.includes(component.name)) {\n        return {\n            ...updatedState,\n            error: {\n                message: `Material no soportado: ${component.name}`\n            }\n        }\n    }\n    return {\n        recipe: {\n            ...updatedState.recipe,\n            components: [\n                ...updatedState.recipe.components,\n                { ...component, grams: \"0\", locked: false }\n            ]\n        },\n        availableComponents: updatedState.availableComponents.filter(availableComponent => availableComponent.name !== component.name),\n        template: updatedState.template,\n    };\n};\n\nconst setEvenGrams = (components, grams = 0) => {\n    const unlockedComponents = components.filter(component => !component.locked);\n    if (unlockedComponents.length > 0) {\n        const gramsPerComponent = new Decimal(grams).div(unlockedComponents.length);\n        unlockedComponents.forEach(component => {\n            component.grams = new Decimal(component.grams).add(gramsPerComponent).toString();\n        });\n    }\n}\n\nconst removeComponent = (currentState, action) => {\n    const removingComponent = currentState.recipe.components.find(recipeComponent => recipeComponent.name === action.component.name);\n    if (currentState.recipe.components[0].name === action.component.name) {\n        return {\n            ..._.cloneDeep(currentState),\n            error: {\n                message: \"No es posible eliminar el componente principal\"\n            }\n        }\n    }\n    const filteredRecipeComponents = currentState.recipe.components.filter(recipeComponent => recipeComponent.name !== action.component.name);\n    const updatedState = _.cloneDeep(currentState);\n\n    updatedState.recipe.components = filteredRecipeComponents;\n    updatedState.availableComponents.push({ name: action.component.name })\n    setEvenGrams(updatedState.recipe.components, removingComponent.grams);\n    return updatedState;\n};\n\nconst getProportions = state => {\n    const proportions = {};\n    const recipeGrams = Decimal(state.recipe.grams);\n    state.template.fixedComponents.forEach(fixedComponent => {\n        proportions[fixedComponent.name] = Decimal(fixedComponent.decimalProportion);\n    });\n    state.recipe.components\n        .filter(recipeComponent => !(recipeComponent.name in proportions))\n        .forEach(component => {\n            proportions[component.name] = Decimal(component.grams).div(recipeGrams);\n        });\n    const proportionValues = Object.values(proportions);\n    //console.log(\"proportionValues\", proportionValues.map(m => m.toNumber()));\n    const validProportions = proportionValues.filter(proportion => proportion !== null && !proportion.isNaN());\n    //console.log(\"validProportions\", validProportions);\n    const totalComponentsProportion = Decimal(1).minus(validProportions.reduce((a, b) => a.add(b), Decimal(0)));\n    if (totalComponentsProportion.toNumber() > 0) {\n        //console.log(\"Remaining proportion\", totalComponentsProportion.toNumber());\n        const propsToUpdate = proportionValues.filter(v => v == null || v.isNaN()).length;\n        //console.log(\"propsToUpdate\", propsToUpdate);\n        const proportionPerItem = totalComponentsProportion.div(propsToUpdate);\n        //console.log(\"proportionPerItem\", proportionPerItem.toNumber());\n        Object.keys(proportions).forEach(componentName => {\n            const propValue = proportions[componentName];\n            if (propValue == null || isNaN(propValue)) {\n                proportions[componentName] = proportionPerItem;\n            }\n        });\n    }\n    return proportions;\n};\n\nconst updateRecipeGrams = (currentState, action) => {\n    const updatedState = _.cloneDeep(currentState);//{ ...currentState };\n\n    const proportions = getProportions(updatedState);\n    updatedState.recipe.grams = action.grams.toString();\n    //console.log(\"A3\", JSON.stringify(updatedState));\n    //console.log(\"proportions:\", JSON.stringify(proportions));\n    updatedState.recipe.components = updatedState.recipe.components.map(component => ({\n        ...component,\n        grams: Decimal(updatedState.recipe.grams).times(Decimal(proportions[component.name])).toString()\n    }));\n    //console.log(\"A4\", JSON.stringify(updatedState));\n    return updatedState;\n};\n\nconst updateComponentGrams = (currentState, action) => {\n    const updatedState = _.cloneDeep(currentState);//{...currentState};\n    const recipeGrams = Decimal(updatedState.recipe.grams);\n    const otherComponents = updatedState.recipe.components\n        .filter(recipeComponent => recipeComponent.name !== action.component.name);\n    const otherGrams = otherComponents.reduce((grams, otherComponent) => grams.add(Decimal(otherComponent.grams)), Decimal(0));\n    const newGrams = otherGrams.add(Decimal(action.component.grams));\n    const deltaGrams = recipeGrams.minus(newGrams);//round(recipeGrams - newGrams);\n    const componentsToUpdate = updatedState.recipe.components\n        .filter(recipeComponent => recipeComponent.name !== action.component.name && !recipeComponent.locked);\n\n    const numberOfComponentsToUpdate = Decimal(componentsToUpdate.length);\n    const gramsPerComponentsToUpdate = deltaGrams.div(numberOfComponentsToUpdate);//round(Decimal(deltaGrams).div(Decimal(numberOfComponentsToUpdate)));\n    componentsToUpdate.forEach(componentToUpdate => {\n        componentToUpdate.grams = Decimal(componentToUpdate.grams).add(gramsPerComponentsToUpdate).toString();//round(componentToUpdate.grams + gramsPerComponentsToUpdate);\n    });\n\n    const updatingComponent = updatedState.recipe.components.find(recipeComponent => recipeComponent.name === action.component.name);\n    updatingComponent.grams = action.component.grams.toString();\n\n    const sumOfGrams = updatedState.recipe.components.reduce((a, b) => a.add(Decimal(b.grams)), Decimal(0));\n    const anyNegative = updatedState.recipe.components.some(recipeComponent => recipeComponent.grams.startsWith(\"-\"));\n    if (!sumOfGrams.equals(updatedState.recipe.grams) || anyNegative) {\n        return currentState;\n    }\n    return updatedState;\n};\n\nconst swapComponent = (currentState, action) => {\n    const updatedState = _.cloneDeep(currentState);\n    const recipeComponent = updatedState.recipe.components.find(recipeComponent => recipeComponent.name === action.swappedComponents.previous);\n    const availableComponent = updatedState.availableComponents.find(availableComponent => availableComponent.name === action.swappedComponents.current);\n\n    recipeComponent.name = action.swappedComponents.current;\n    availableComponent.name = action.swappedComponents.previous;\n    return updatedState;\n};\n\nexport const reducer = (currentState, action) => {\n    const type = action.type;\n    //console.log(JSON.stringify(action));\n    switch (type) {\n        case \"swapComponent\":\n            return swapComponent(currentState, action);\n        case \"updateComponentGrams\":\n            return updateComponentGrams(currentState, action);\n        case \"updateRecipeGrams\":\n            return updateRecipeGrams(currentState, action);\n        case \"removeComponent\":\n            return removeComponent(currentState, action);\n        case \"toggleLock\":\n            return toggleLock(currentState, action);\n        case \"addComponent\":\n            return addComponent(currentState, action);\n\n        case \"new\":\n            return createNewRecipe(currentState, action);\n        default:\n\n    }\n    return currentState;\n};\n","import React from 'react';\n//import { FcLock as Locked, FcUnlock as Unlocked } from \"react-icons/fc\";\nimport { FaLock as Locked, FaUnlock as Unlocked } from \"react-icons/fa\";\n\n\nconst SelectComponent = ({components = [], selectedComponent = {}, ...props}) => {\n  return (\n    <select value={selectedComponent.name} {...props}>\n      {components.map(component => (\n        <option key={component.name} value={component.name}>{component.name}</option>\n      ))}\n    </select>\n  );\n};\n\nconst Calculator = ({\n  recipe = {}, \n  components=[],\n  onChangeRecipeGrams = () => {},\n  onSwapComponent = () => {},\n  onToggleComponent = () => {},\n  onUpdateComponentGrams = () => {},\n}) => {\n  if (!recipe.name) {\n    return null;\n  }\n\n  return (\n    <div style={{textAlign: \"left\"}}>\n      <h3>Gramaje deseado</h3>\n      {recipe.name} <input type=\"text\" pattern=\"[0-9|\\.]\" onChange={onChangeRecipeGrams} value={recipe.grams}/> <br />\n      <h3>Receta</h3>\n      {recipe.components.map((component, index) => (\n        <div key={component.name}>\n           <SelectComponent style={index === 0 ? {color: \"gray\", backgroundColor: \"white\"} : {}}\n              disabled={index === 0} components={[component, ...components]} selectedComponent={component} onChange={ev => {\n                if(component.name !== ev.target.value) {\n                  onSwapComponent(component.name, ev.target.value);\n                }\n              }}/>  <input type=\"number\" value={component.grams} onChange={ev => onUpdateComponentGrams(component.name, ev.target.value)}/> {(component.locked && <Locked onClick={() => onToggleComponent(component.name)} style={{width:15, verticalAlign: \"middle\"}}/>) || <Unlocked onClick={() => onToggleComponent(component.name)} style={{width:15, verticalAlign: \"middle\"}}/>}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Calculator;\n","import React from 'react';\n\n\nexport default ({sharedRecipe}) => {\n  return (\n    <>\n      <h4>{sharedRecipe.recipe.name}: {sharedRecipe.recipe.grams} gr</h4>\n      <div className=\"recipe\">\n        {sharedRecipe.recipe.components.map(recipeComponent => (\n          <div key={recipeComponent.name}>{recipeComponent.name} = {recipeComponent.grams} gr</div>\n        ))}\n      </div>\n    </>\n  );\n};\n","import Decimal from 'decimal.js';\n\nexport const compressState = state => {\n  return [\n    state.recipe.name,\n    Decimal(state.recipe.grams).toNumber(),\n    state.recipe.components.map(recipeComponent => [\n      recipeComponent.name, Decimal(recipeComponent.grams).toNumber()\n    ])\n  ]\n};\n\nexport const encodeCompressedState = compressedState => {\n  return btoa(JSON.stringify(compressedState));\n};\n\nexport const stateToShareableURL = state => {\n  const hash = encodeCompressedState(compressState(state))\n  return `${window.location.origin}${process.env.PUBLIC_URL}?t=0#${hash}`;\n};\n\nexport const decompressState = encodedCompressedState => {\n  const decodedState= JSON.parse(atob(encodedCompressedState));\n  return {\n    recipe: {\n      name: decodedState[0],\n      grams: decodedState[1],\n      components: decodedState[2].map(componentArray => ({\n        name: componentArray[0],\n        grams: componentArray[1]\n      }))\n    }\n  };\n};\n","import React from 'react';\nimport './App.css';\nimport { reducer } from './Recipe';\nimport Calculator from './Calculator.js';\nimport Decimal from 'decimal.js';\nimport SharedRecipe from './SharedRecipe';\nimport { decompressState, stateToShareableURL } from './share';\nimport {\n    FaRegShareSquare as ShareIcon,\n    FaFacebook as FacebookIcon,\n    FaLinkedinIn as LinkedinIcon,\n    FaRedditAlien as RedditIcon\n} from \"react-icons/fa\";\nimport { IoClose as CloseIcon } from 'react-icons/io5';\nimport { GrCalculator as CalculatorIcon } from \"react-icons/gr\";\nimport { FiCopy as CopyIcon } from \"react-icons/fi\";\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\n\nimport {\n    FacebookShareButton,\n    LinkedinShareButton,\n    RedditShareButton,\n    TelegramShareButton,\n    TwitterShareButton,\n    WhatsappShareButton,\n} from \"react-share\";\n\nconst Divider = () => <div style={{ display: \"inline\", width: 12, marginHorizontal: 12 }} />;\n\nfunction App() {\n\n    const [state, dispatch] = React.useReducer(reducer, {});\n    const getShareURL = () => {\n        return stateToShareableURL(state);\n    };\n\n    if (window.location.hash.length > 1) {\n        const sharedRecipe = decompressState(window.location.hash.substr(1));\n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <h3>Calculadora Joyería</h3>\n                    <SharedRecipe sharedRecipe={sharedRecipe} />\n                    <div style={{ marginTop: 50 }}>\n                        <CloseIcon style={{ color: \"red\", cursor: \"pointer\", marginRight: 25 }} onClick={() => window.close()} />\n                        <CopyToClipboard text={window.location.href} onCopy={() => alert(\"Copiado!\")}>\n                            <CopyIcon style={{ marginLeft: 25, color: \"yellow\", cursor: \"pointer\" }} />\n                        </CopyToClipboard>\n                    </div>\n                    <div>\n                        <FacebookShareButton quote=\"Mira esta receta de aleación para joyería\" hashtag=\"jwlr\" url={window.location.href}><FacebookIcon /></FacebookShareButton>\n                        <Divider />\n                        <LinkedinShareButton url={window.location.href} title=\"Receta de aleación para joyería\" summary={sharedRecipe.recipe.name} source={window.location.href} >\n                            <LinkedinIcon />\n                        </LinkedinShareButton>\n                        <Divider />\n                        <RedditShareButton url={window.location.href} title={`Mi receta para aleación ${sharedRecipe.recipe.name}`}>\n                            <RedditIcon />\n                        </RedditShareButton>\n                    </div>\n                </header>\n            </div>\n        );\n    }\n\n\n\n    const recipeTemplates = [\n        {\n            name: \"Plata 925\",\n            fixedComponents: [\n                { \"name\": \"Plata\", \"decimalProportion\": 0.925 }\n            ],\n            otherComponents: [\n                { \"name\": \"Cobre\" },\n                { \"name\": \"Aloi\" },\n                { \"name\": \"Pandora\" },\n            ]\n        },\n        {\n            name: \"Oro 18k\",\n            fixedComponents: [\n                { \"name\": \"Oro\", \"decimalProportion\": 0.75 }\n            ],\n            otherComponents: [\n                { \"name\": \"Plata\" },\n                { \"name\": \"Paladio\" },\n                { \"name\": \"Platino\" },\n            ]\n        }\n    ];\n\n    const onSelectRecipe = ev => {\n        const recipeTemplate = recipeTemplates[ev.target.value];\n        dispatch({ type: \"new\", template: recipeTemplate });\n    };\n\n    const isDecimal = candidate => {\n        try {\n            Decimal(candidate);\n        } catch (e) {\n            if (e instanceof Error && /DecimalError/.test(e.message)) {\n                return false\n            }\n        }\n        return true;\n    };\n\n    const onChangeRecipeGrams = ev => {\n        let recipeGrams = ev.target.value !== \"\" ? ev.target.value : \"0\";\n        if (isDecimal(recipeGrams) && !Decimal(recipeGrams).isNeg()) { //TODO: can we do this more efficiently?\n\n            if (recipeGrams === \"0\") {\n                setTimeout(() => ev.target.select(), 125);\n            } else if (recipeGrams.startsWith(\"0\")) {\n                recipeGrams = Decimal(recipeGrams).toString();\n            }\n            dispatch({ type: \"updateRecipeGrams\", grams: recipeGrams });\n        }\n    };\n\n    const onSwapComponent = (previous, current) => {\n        dispatch({ type: \"swapComponent\", swappedComponents: { previous, current } });\n    };\n\n    const addComponent = ev => {\n        dispatch({ type: \"addComponent\", component: { name: ev.target.value } });\n    };\n\n    const onToggleComponent = name => {\n        dispatch({ type: \"toggleLock\", component: { name } });\n    };\n\n    const onUpdateComponentGrams = (name, grams) => {\n        if (isDecimal(grams)) { //TODO: can we do this more efficiently?\n            dispatch({ type: \"updateComponentGrams\", component: { name, grams } });\n        }\n    };\n    const url = state.recipe ? getShareURL() : \"\";\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <h3>Calculadora Joyería</h3>\n                <h5>Aleaciones</h5>\n                <select onChange={onSelectRecipe} defaultValue=\"\">\n                    <option>-- Escoge aleación --</option>\n                    {recipeTemplates.map((recipe, index) => (\n                        <option key={recipe.name} value={index}>{recipe.name}</option>\n                    ))}\n                </select>\n                <Calculator\n                    components={state?.availableComponents ?? []} recipe={state.recipe}\n                    onChangeRecipeGrams={onChangeRecipeGrams}\n                    onSwapComponent={onSwapComponent}\n                    onToggleComponent={onToggleComponent}\n                    onUpdateComponentGrams={onUpdateComponentGrams} />\n                <br />\n                {state.availableComponents && (\n                    <>\n                        <select onChange={addComponent} value=\"\">\n                            <option value=\"\">-- Agregar Componente --</option>\n                            {state.availableComponents.map(availableComponent => (\n                                <option key={availableComponent.name} value={availableComponent.name}>{availableComponent.name}</option>\n                            ))}\n                        </select>\n                        <br />\n                    </>\n                )}\n                {state.recipe && <div>\n                    <ShareIcon onClick={() => window.open(url, \"_blank\")} style={{ cursor: \"pointer\" }} />\n                </div>}\n            </header>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}