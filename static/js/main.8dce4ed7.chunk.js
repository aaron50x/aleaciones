(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{25:function(e,n,t){},26:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var o=t(3),a=t.n(o),r=t(14),c=t.n(r),i=(t(25),t(19)),s=(t(26),t(11)),m=t(4),p=t(2),l=t.n(p),u=t(6),d=t.n(u),j=function(e,n){var t=e.recipe.components.find((function(e){return e.name===n.component.name}));if(e.recipe.components[0].name===n.component.name)return Object(m.a)(Object(m.a)({},d.a.cloneDeep(e)),{},{error:{message:"No es posible eliminar el componente principal"}});var o=e.recipe.components.filter((function(e){return e.name!==n.component.name})),a=d.a.cloneDeep(e);return a.recipe.components=o,a.availableComponents.push({name:n.component.name}),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e.filter((function(e){return!e.locked}));if(t.length>0){var o=new l.a(n).div(t.length);t.forEach((function(e){e.grams=new l.a(e.grams).add(o).toString()}))}}(a.recipe.components,t.grams),a},f=function(e,n){var t=d.a.cloneDeep(e),o=function(e){var n={},t=l()(e.recipe.grams);e.template.fixedComponents.forEach((function(e){n[e.name]=l()(e.decimalProportion)})),e.recipe.components.filter((function(e){return!(e.name in n)})).forEach((function(e){n[e.name]=l()(e.grams).div(t)}));var o=Object.values(n),a=o.filter((function(e){return null!==e&&!e.isNaN()})),r=l()(1).minus(a.reduce((function(e,n){return e.add(n)}),l()(0)));if(r.toNumber()>0){var c=o.filter((function(e){return null==e||e.isNaN()})).length,i=r.div(c);Object.keys(n).forEach((function(e){var t=n[e];(null==t||isNaN(t))&&(n[e]=i)}))}return n}(t);return t.recipe.grams=n.grams.toString(),t.recipe.components=t.recipe.components.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{grams:l()(t.recipe.grams).times(l()(o[e.name])).toString()})})),t},b=function(e,n){switch(n.type){case"swapComponent":return function(e,n){var t=d.a.cloneDeep(e),o=t.recipe.components.find((function(e){return e.name===n.swappedComponents.previous})),a=t.availableComponents.find((function(e){return e.name===n.swappedComponents.current}));return o.name=n.swappedComponents.current,a.name=n.swappedComponents.previous,t}(e,n);case"updateComponentGrams":return function(e,n){var t=d.a.cloneDeep(e),o=l()(t.recipe.grams),a=t.recipe.components.filter((function(e){return e.name!==n.component.name})).reduce((function(e,n){return e.add(l()(n.grams))}),l()(0)).add(l()(n.component.grams)),r=o.minus(a),c=t.recipe.components.filter((function(e){return e.name!==n.component.name&&!e.locked})),i=l()(c.length),s=r.div(i);c.forEach((function(e){e.grams=l()(e.grams).add(s).toString()})),t.recipe.components.find((function(e){return e.name===n.component.name})).grams=n.component.grams.toString();var m=t.recipe.components.reduce((function(e,n){return e.add(l()(n.grams))}),l()(0)),p=t.recipe.components.some((function(e){return e.grams.startsWith("-")}));return!m.equals(t.recipe.grams)||p?e:t}(e,n);case"updateRecipeGrams":return f(e,n);case"removeComponent":return j(e,n);case"toggleLock":return function(e,n){var t=d.a.cloneDeep(e);return t.recipe.components=t.recipe.components.map((function(e){return e.name!==n.component.name?e:Object(m.a)(Object(m.a)({},e),{},{locked:!e.locked})})),t}(e,n);case"addComponent":return function(e,n){var t=n.component,o=d.a.cloneDeep(e);return 0===o.availableComponents.length?Object(m.a)(Object(m.a)({},o),{},{error:{message:"No es posible agregar m\xe1s componentes a esta receta"}}):o.availableComponents.map((function(e){return e.name})).includes(t.name)?{recipe:Object(m.a)(Object(m.a)({},o.recipe),{},{components:[].concat(Object(s.a)(o.recipe.components),[Object(m.a)(Object(m.a)({},t),{},{grams:"0",locked:!1})])}),availableComponents:o.availableComponents.filter((function(e){return e.name!==t.name})),template:o.template}:Object(m.a)(Object(m.a)({},o),{},{error:{message:"Material no soportado: ".concat(t.name)}})}(e,n);case"new":return function(e,n){var t=n.template,o=t.fixedComponents.reduce((function(e,n){return e.add(l()(n.decimalProportion))}),l()(0)),a=t.fixedComponents.map((function(e){return{name:e.name,grams:e.decimalProportion.toString(),locked:!0}})),r=Object(m.a)(Object(m.a)({},t.otherComponents[0]),{},{grams:l()(1).minus(o).toString(),locked:!1}),c=t.otherComponents.filter((function(e){return e.name!==r.name}));return{recipe:{name:t.name,grams:"1",components:[].concat(Object(s.a)(a),[r])},availableComponents:c,template:t}}(0,n)}return e},g=t(20),h=t(5),v=t(1),O=function(e){var n=e.components,t=void 0===n?[]:n,o=e.selectedComponent,a=void 0===o?{}:o,r=Object(g.a)(e,["components","selectedComponent"]);return Object(v.jsx)("select",Object(m.a)(Object(m.a)({value:a.name},r),{},{children:t.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},e.name)}))}))},C=function(e){var n=e.recipe,t=void 0===n?{}:n,o=e.components,a=void 0===o?[]:o,r=e.onChangeRecipeGrams,c=void 0===r?function(){}:r,i=e.onSwapComponent,m=void 0===i?function(){}:i,p=e.onToggleComponent,l=void 0===p?function(){}:p,u=e.onUpdateComponentGrams,d=void 0===u?function(){}:u;return t.name?Object(v.jsxs)("div",{style:{textAlign:"left"},children:[Object(v.jsx)("h3",{children:"Gramaje deseado"}),t.name," ",Object(v.jsx)("input",{type:"text",pattern:"[0-9|\\.]",onChange:c,value:t.grams})," ",Object(v.jsx)("br",{}),Object(v.jsx)("h3",{children:"Receta"}),t.components.map((function(e,n){return Object(v.jsxs)("div",{children:[Object(v.jsx)(O,{style:0===n?{color:"gray",backgroundColor:"white"}:{},disabled:0===n,components:[e].concat(Object(s.a)(a)),selectedComponent:e,onChange:function(n){e.name!==n.target.value&&m(e.name,n.target.value)}}),"  ",Object(v.jsx)("input",{type:"number",value:e.grams,onChange:function(n){return d(e.name,n.target.value)}})," ",e.locked&&Object(v.jsx)(h.c,{onClick:function(){return l(e.name)},style:{width:15,verticalAlign:"middle"}})||Object(v.jsx)(h.f,{onClick:function(){return l(e.name)},style:{width:15,verticalAlign:"middle"}})]},e.name)}))]}):null},x=function(e){var n=e.sharedRecipe;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h4",{children:[n.recipe.name,": ",n.recipe.grams," gr"]}),Object(v.jsx)("div",{className:"recipe",children:n.recipe.components.map((function(e){return Object(v.jsxs)("div",{children:[e.name," = ",e.grams," gr"]},e.name)}))})]})},w=function(e){var n,t=(n=function(e){return[e.recipe.name,l()(e.recipe.grams).toNumber(),e.recipe.components.map((function(e){return[e.name,l()(e.grams).toNumber()]}))]}(e),btoa(JSON.stringify(n)));return"".concat(window.location.origin).concat("/aleaciones","?t=0#").concat(t)},y=t(16),k=t(17),N=t(15),S=t(36),P=t(37),A=t(38),R=function(){return Object(v.jsx)("div",{style:{display:"inline",width:12,marginHorizontal:12}})};var D=function(){var e,n=a.a.useReducer(b,{}),t=Object(i.a)(n,2),o=t[0],r=t[1];if(window.location.hash.length>1){var c=function(e){var n=JSON.parse(atob(e));return{recipe:{name:n[0],grams:n[1],components:n[2].map((function(e){return{name:e[0],grams:e[1]}}))}}}(window.location.hash.substr(1));return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("h3",{children:"Calculadora Joyer\xeda"}),Object(v.jsx)(x,{sharedRecipe:c}),Object(v.jsxs)("div",{style:{marginTop:50},children:[Object(v.jsx)(y.a,{style:{color:"red",cursor:"pointer",marginRight:25},onClick:function(){return window.close()}}),Object(v.jsx)(N.CopyToClipboard,{text:window.location.href,onCopy:function(){return alert("Copiado!")},children:Object(v.jsx)(k.a,{style:{marginLeft:25,color:"yellow",cursor:"pointer"}})})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{quote:"Mira esta receta de aleaci\xf3n para joyer\xeda",hashtag:"jwlr",url:window.location.href,children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(R,{}),Object(v.jsx)(P.a,{url:window.location.href,title:"Receta de aleaci\xf3n para joyer\xeda",summary:c.recipe.name,source:window.location.href,children:Object(v.jsx)(h.b,{})}),Object(v.jsx)(R,{}),Object(v.jsx)(A.a,{url:window.location.href,title:"Mi receta para aleaci\xf3n ".concat(c.recipe.name),children:Object(v.jsx)(h.d,{})})]})]})})}var s=[{name:"Plata 925",fixedComponents:[{name:"Plata",decimalProportion:.925}],otherComponents:[{name:"Cobre"},{name:"Aloi"},{name:"Pandora"}]},{name:"Oro 18k",fixedComponents:[{name:"Oro",decimalProportion:.75}],otherComponents:[{name:"Plata"},{name:"Paladio"},{name:"Platino"}]}],m=function(e){try{l()(e)}catch(n){if(n instanceof Error&&/DecimalError/.test(n.message))return!1}return!0},p=o.recipe?w(o):"";return Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",children:[Object(v.jsx)("h3",{children:"Calculadora Joyer\xeda"}),Object(v.jsx)("h5",{children:"Aleaciones"}),Object(v.jsxs)("select",{onChange:function(e){var n=s[e.target.value];r({type:"new",template:n})},defaultValue:"",children:[Object(v.jsx)("option",{children:"-- Escoge aleaci\xf3n --"}),s.map((function(e,n){return Object(v.jsx)("option",{value:n,children:e.name},e.name)}))]}),Object(v.jsx)(C,{components:null!==(e=null===o||void 0===o?void 0:o.availableComponents)&&void 0!==e?e:[],recipe:o.recipe,onChangeRecipeGrams:function(e){var n=""!==e.target.value?e.target.value:"0";m(n)&&!l()(n).isNeg()&&("0"===n?setTimeout((function(){return e.target.select()}),125):n.startsWith("0")&&(n=l()(n).toString()),r({type:"updateRecipeGrams",grams:n}))},onSwapComponent:function(e,n){r({type:"swapComponent",swappedComponents:{previous:e,current:n}})},onToggleComponent:function(e){r({type:"toggleLock",component:{name:e}})},onUpdateComponentGrams:function(e,n){m(n)&&r({type:"updateComponentGrams",component:{name:e,grams:n}})}}),Object(v.jsx)("br",{}),o.availableComponents&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("select",{onChange:function(e){r({type:"addComponent",component:{name:e.target.value}})},value:"",children:[Object(v.jsx)("option",{value:"",children:"-- Agregar Componente --"}),o.availableComponents.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),Object(v.jsx)("br",{})]}),o.recipe&&Object(v.jsx)("div",{children:Object(v.jsx)(h.e,{onClick:function(){return window.open(p,"_blank")},style:{cursor:"pointer"}})})]})})},E=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(n){var t=n.getCLS,o=n.getFID,a=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),o(e),a(e),r(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root")),E()}},[[33,1,2]]]);
//# sourceMappingURL=main.8dce4ed7.chunk.js.map