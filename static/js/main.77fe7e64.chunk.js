(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var o=t(4),a=t.n(o),r=t(12),c=t.n(r),i=(t(20),t(14)),m=(t(21),t(8)),s=t(3),p=t(2),l=t.n(p),u=t(5),d=t.n(u),j=function(e,n){var t=e.recipe.components.find((function(e){return e.name===n.component.name}));if(e.recipe.components[0].name===n.component.name)return Object(s.a)(Object(s.a)({},d.a.cloneDeep(e)),{},{error:{message:"No es posible eliminar el componente principal"}});var o=e.recipe.components.filter((function(e){return e.name!==n.component.name})),a=d.a.cloneDeep(e);return a.recipe.components=o,a.availableComponents.push({name:n.component.name}),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e.filter((function(e){return!e.locked}));if(t.length>0){var o=new l.a(n).div(t.length);t.forEach((function(e){e.grams=new l.a(e.grams).add(o).toString()}))}}(a.recipe.components,t.grams),a},f=function(e,n){switch(n.type){case"swapComponent":return function(e,n){var t=d.a.cloneDeep(e),o=t.recipe.components.find((function(e){return e.name===n.swappedComponents.previous})),a=t.availableComponents.find((function(e){return e.name===n.swappedComponents.current}));return o.name=n.swappedComponents.current,a.name=n.swappedComponents.previous,t}(e,n);case"updateComponentGrams":return function(e,n){var t=d.a.cloneDeep(e),o=l()(t.recipe.grams),a=t.recipe.components.filter((function(e){return e.name!==n.component.name})).reduce((function(e,n){return e.add(l()(n.grams))}),l()(0)).add(l()(n.component.grams)),r=o.minus(a),c=t.recipe.components.filter((function(e){return e.name!==n.component.name&&!e.locked})),i=l()(c.length),m=r.div(i);c.forEach((function(e){e.grams=l()(e.grams).add(m).toString()})),t.recipe.components.find((function(e){return e.name===n.component.name})).grams=n.component.grams.toString();var s=t.recipe.components.reduce((function(e,n){return e.add(l()(n.grams))}),l()(0)),p=t.recipe.components.some((function(e){return e.grams.startsWith("-")}));return!s.equals(t.recipe.grams)||p?e:t}(e,n);case"updateRecipeGrams":return function(e,n){var t=d.a.cloneDeep(e),o=l()(t.recipe.grams),a={};return t.template.fixedComponents.forEach((function(e){a[e.name]=e.decimalProportion})),t.recipe.components.filter((function(e){return!(e.name in a)})).forEach((function(e){a[e.name]=l()(e.grams).div(o).toNumber()})),t.recipe.grams=n.grams.toString(),t.recipe.components=t.recipe.components.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{grams:l()(t.recipe.grams).times(l()(a[e.name])).toString()})})),t}(e,n);case"removeComponent":return j(e,n);case"toggleLock":return function(e,n){var t=d.a.cloneDeep(e);return t.recipe.components=t.recipe.components.map((function(e){return e.name!==n.component.name?e:Object(s.a)(Object(s.a)({},e),{},{locked:!e.locked})})),t}(e,n);case"addComponent":return function(e,n){var t=n.component,o=d.a.cloneDeep(e);return 0===o.availableComponents.length?Object(s.a)(Object(s.a)({},o),{},{error:{message:"No es posible agregar m\xe1s componentes a esta receta"}}):o.availableComponents.map((function(e){return e.name})).includes(t.name)?{recipe:Object(s.a)(Object(s.a)({},o.recipe),{},{components:[].concat(Object(m.a)(o.recipe.components),[Object(s.a)(Object(s.a)({},t),{},{grams:"0",locked:!1})])}),availableComponents:o.availableComponents.filter((function(e){return e.name!==t.name})),template:o.template}:Object(s.a)(Object(s.a)({},o),{},{error:{message:"Material no soportado: ".concat(t.name)}})}(e,n);case"new":return function(e,n){var t=n.template,o=t.fixedComponents.reduce((function(e,n){return e.add(l()(n.decimalProportion))}),l()(0)),a=t.fixedComponents.map((function(e){return{name:e.name,grams:e.decimalProportion.toString(),locked:!0}})),r=Object(s.a)(Object(s.a)({},t.otherComponents[0]),{},{grams:l()(1).minus(o).toString(),locked:!1}),c=t.otherComponents.filter((function(e){return e.name!==r.name}));return{recipe:{name:t.name,grams:"1",components:[].concat(Object(m.a)(a),[r])},availableComponents:c,template:t}}(0,n)}return e},g=t(15),b=t(7),h=t(1),v=function(e){var n=e.components,t=void 0===n?[]:n,o=e.selectedComponent,a=void 0===o?{}:o,r=Object(g.a)(e,["components","selectedComponent"]);return Object(h.jsx)("select",Object(s.a)(Object(s.a)({value:a.name},r),{},{children:t.map((function(e){return Object(h.jsx)("option",{value:e.name,children:e.name},e.name)}))}))},O=function(e){var n=e.recipe,t=void 0===n?{}:n,o=e.components,a=void 0===o?[]:o,r=e.onChangeRecipeGrams,c=void 0===r?function(){}:r,i=e.onSwapComponent,s=void 0===i?function(){}:i,p=e.onToggleComponent,l=void 0===p?function(){}:p,u=e.onUpdateComponentGrams,d=void 0===u?function(){}:u;return t.name?Object(h.jsxs)("div",{style:{textAlign:"left"},children:[Object(h.jsx)("h3",{children:"Gramaje deseado"}),t.name," ",Object(h.jsx)("input",{type:"text",pattern:"[0-9|\\.]",onChange:c,value:t.grams})," ",Object(h.jsx)("br",{}),Object(h.jsx)("h3",{children:"Receta"}),t.components.map((function(e,n){return Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{style:0===n?{color:"gray",backgroundColor:"white"}:{},disabled:0===n,components:[e].concat(Object(m.a)(a)),selectedComponent:e,onChange:function(n){e.name!==n.target.value&&s(e.name,n.target.value)}}),"  ",Object(h.jsx)("input",{type:"number",value:e.grams,onChange:function(n){return d(e.name,n.target.value)}})," ",e.locked&&Object(h.jsx)(b.a,{onClick:function(){return l(e.name)},style:{width:15,verticalAlign:"middle"}})||Object(h.jsx)(b.c,{onClick:function(){return l(e.name)},style:{width:15,verticalAlign:"middle"}})]},e.name)}))]}):null},C=function(e){var n=e.sharedRecipe;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h4",{children:[n.recipe.name,": ",n.recipe.grams," gr"]}),Object(h.jsx)("div",{className:"recipe",children:n.recipe.components.map((function(e){return Object(h.jsxs)("div",{children:[e.name," = ",e.grams," gr"]},e.name)}))})]})},x=function(e){var n,t=(n=function(e){return[e.recipe.name,l()(e.recipe.grams).toNumber(),e.recipe.components.map((function(e){return[e.name,l()(e.grams).toNumber()]}))]}(e),btoa(JSON.stringify(n)));return"".concat(window.location.origin).concat("/aleaciones","?t=0#").concat(t)},w=t(11),y=t(13);var k=function(){var e,n=a.a.useReducer(f,{}),t=Object(i.a)(n,2),o=t[0],r=t[1];if(window.location.hash.length>1){var c=function(e){var n=JSON.parse(atob(e));return{recipe:{name:n[0],grams:n[1],components:n[2].map((function(e){return{name:e[0],grams:e[1]}}))}}}(window.location.hash.substr(1));return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("h3",{children:"Calculadora Joyer\xeda"}),Object(h.jsx)(C,{sharedRecipe:c}),Object(h.jsxs)("div",{style:{marginTop:50},children:[Object(h.jsx)(w.b,{style:{color:"white",cursor:"pointer",marginRight:25},onClick:function(){return window.location.href="".concat(window.location.origin).concat("/aleaciones")}}),Object(h.jsx)(y.CopyToClipboard,{text:window.location.href,onCopy:function(){return alert("Copiado!")},children:Object(h.jsx)(w.a,{style:{marginLeft:25,color:"yellow",cursor:"pointer"}})})]})]})})}var m=[{name:"Plata 925",fixedComponents:[{name:"Plata",decimalProportion:.925}],otherComponents:[{name:"Cobre"},{name:"Aloi"},{name:"Pandora"}]},{name:"Oro 18k",fixedComponents:[{name:"Oro",decimalProportion:.75}],otherComponents:[{name:"Plata"},{name:"Paladio"},{name:"Platino"}]}],s=function(e){try{l()(e)}catch(n){if(n instanceof Error&&/DecimalError/.test(n.message))return!1}return!0},p=o.recipe?x(o):"";return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("h3",{children:"Calculadora Joyer\xeda"}),Object(h.jsx)("h5",{children:"Aleaciones"}),Object(h.jsxs)("select",{onChange:function(e){var n=m[e.target.value];r({type:"new",template:n})},defaultValue:"",children:[Object(h.jsx)("option",{children:"-- Escoge aleaci\xf3n --"}),m.map((function(e,n){return Object(h.jsx)("option",{value:n,children:e.name},e.name)}))]}),Object(h.jsx)(O,{components:null!==(e=null===o||void 0===o?void 0:o.availableComponents)&&void 0!==e?e:[],recipe:o.recipe,onChangeRecipeGrams:function(e){var n=""!==e.target.value?e.target.value:"0";s(n)&&!l()(n).isNeg()&&r({type:"updateRecipeGrams",grams:n})},onSwapComponent:function(e,n){r({type:"swapComponent",swappedComponents:{previous:e,current:n}})},onToggleComponent:function(e){r({type:"toggleLock",component:{name:e}})},onUpdateComponentGrams:function(e,n){s(n)&&r({type:"updateComponentGrams",component:{name:e,grams:n}})}}),Object(h.jsx)("br",{}),o.availableComponents&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("select",{onChange:function(e){r({type:"addComponent",component:{name:e.target.value}})},value:"",children:[Object(h.jsx)("option",{value:"",children:"-- Agregar Componente --"}),o.availableComponents.map((function(e){return Object(h.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),Object(h.jsx)("br",{})]}),o.recipe&&Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{onClick:function(){return window.location.assign(p)},style:{cursor:"pointer"}})})]})})},N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,30)).then((function(n){var t=n.getCLS,o=n.getFID,a=n.getFCP,r=n.getLCP,c=n.getTTFB;t(e),o(e),a(e),r(e),c(e)}))};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root")),N()}},[[28,1,2]]]);
//# sourceMappingURL=main.77fe7e64.chunk.js.map